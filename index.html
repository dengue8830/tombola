<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Tombola jujuy</title>

	<link rel="stylesheet" href="css/jquery.mobile-1.3.2.css">

	<link rel="stylesheet" href="css/datebox/jqm-datebox.min.css">
	<link rel="stylesheet" href="css/tombola.css">

	<script src="js/jquery-1.10.2.min.js"></script>
	<script src="js/jquery.mobile-1.3.2.min.js"></script>
	<script src="js/datebox/jqm-datebox.core.min.js"></script>
	<script src="js/datebox/jqm-datebox.mode.datebox.min.js"></script>
	<script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.calbox.min.js"></script>	

</head>
<body>
<!-- page -->
<div data-role="page" data-theme="b" id="page">

	<div data-role="panel" id="defaultpanel" data-position="left" data-display="reveal" data-theme="a">
        <ul data-role="listview" data-theme="a"  data-divider-theme="b" class="nav-search">
            <!-- <li data-icon="delete"><a href="#" data-rel="close">Close menu</a></li> -->
            	<li data-role="list-divider">Menu</li>
            	<li data-icon="home" id="home" data-rel="close"><a href="#page">Sorteos</a></li>
                <li data-icon="custom" id="heart"><a href="cabalas.html">Cabalas</a></li>
                <li data-icon="custom" id="agencia" ><a href="agencias.html" >Agencias Autorizadas</a></li>
                <li data-icon="custom" id="premio"><a href="premios.html">Liquidacion Premios</a></li>
                <li data-icon="alert"><a href="#pageJuego" >Juego Responsable</a></li>
                <li data-icon="info"><a href="#pageInfo" >Informacion General</a></li>
   		</ul>
	</div><!-- /default panel -->


	<!-- cabecera -->
	<div data-role="header" data-theme="b" >
		<h3> Tombola Jujeña</h3>

		<a href="#defaultpanel" data-icon="bars" data-iconpos="notext" data-iconshadow="false" data-theme="d" class="ui-icon-alt ui-icon-nodisc"  data-transition="fade" data-direction="reverse">info</a>
		<!-- <a href="#pageSuenios" data-icon="grid" data-iconpos="notext" data-iconshadow="false" data-theme="d" class="ui-icon-alt ui-icon-nodisc"  data-transition="fade">cabalas</a> -->
	<div data-role="navbar"></div>			
				
				
	</div>
	<!-- content -->
	<div data-role="content">

		<div class="ui-bar ui-bar-a" data-role="content" style="display:none" id="div_msj">
				<p>Sin conexión, consultando localmente</p>
		</div>
		
		<div data-role="collapsible-set" data-content-theme="b" id="acordion">
			
			<div data-role="collapsible"  id="tablas_1">
				<h3></h3>
				<div data-role="content"></div>
			</div>

			<div data-role="collapsible" id="tablas_2">
				<h3></h3>
				<div data-role="content"></div>
			</div>

			<div data-role="collapsible" id="tablas_3">
				<h3></h3>
				<div data-role="content"></div>
			</div>

			<div data-role="collapsible" id="tablas_4">
				<h3></h3>
				<div data-role="content"></div>
			</div>
			
		</div>
	</div>
	<!-- footer -->
	<div data-role="footer" data-position="fixed" data-theme="b">
		<fieldset class="ui-grid-b">
   			<div class="ui-block-a" align="left"><a href="#" data-role="button" data-icon="arrow-l" data-iconpos="notext" data-iconshadow="false" data-theme="d" class="ui-icon-alt ui-icon-nodisc" id="btn_restar_dia" onclick="controller_mostrarSorteos_modificarFecha('menos');"></a></div>
    		<div class="ui-block-b">

				<!-- El href tiene que estar dentro de un table para funcionar... nose porque -->
				 <table>
					<tr>
						<td>
							<a href="#" data-role="button" data-icon="custom" data-iconpos="right" data-iconshadow="false" data-theme="d" id="calendario" class="ui-icon-nodisc"></a>
							<!-- <a href="#" data-role="button" data-iconshadow="false" data-theme="d" id="calendario"></a> -->
						</td>
						<!-- <td>
							<img title="Eliminar" src="/tombola_repo/css/images/icons-png/video-white.png"  border="0">
						</td> -->
					</tr>
				</table> 
				<!-- <a href="#" data-role="button" data-icon="arrow-l" data-iconshadow="false" data-theme="d" class="ui-icon-alt ui-icon-nodisc" id="calendario"></a> -->
				
				
<!-- <div class="ui-input-text ui-shadow-inset ui-corner-all ui-btn-shadow ui-body-b">
<input type="text" id="ctrlgrp" name="themes" data-role="datebox" data-theme="b" data-options='{"centerHoriz": true, "mode": "datebox", "themeHeader":"d", "themeButton":"b"}' class="ui-input-text ui-body-b ui-corner-all ui-icon-datebox" readonly="readonly">	
</div> -->
				<div style="display:none">



					 <!-- <input name="ctrlgrp" id="ctrlgrp" type="text" data-role="datebox" data-options='{"mode": "datebox", "centerHoriz": true, "useNewStyle":true, "beforeToday": true}' class="ui-input-text ui-body-c ui-corner-all ui-icon-datebox" readonly="readonly">  -->

					 <input name="dynend" type="text" data-role="datebox" data-options='{"mode": "calbox", "centerHoriz": true, "useNewStyle":true, "beforeToday": true, "useButton": true}' id="ctrlgrp" class="ui-input-text ui-body-d ui-corner-all ui-icon-datebox"/>

					<!-- <input type="text" id="ctrlgrp" name="themes" data-role="datebox" data-theme="b" data-options='{"centerHoriz": true, "mode": "datebox", "themeHeader":"d", "themeButton":"b"}' class="ui-input-text ui-body-b ui-corner-all ui-icon-datebox" readonly="readonly"> -->

  					<!-- <input name="ctrlgrp" type="text" data-role="datebox"
  					   						 data-options='{"mode": "datebox", "centerHoriz": true, "useNewStyle":true}' id="ctrlgrp"/> -->
				</div>

			</div>
    		<div class="ui-block-c" align="right"><a href="#" data-role="button" data-icon="arrow-r" data-iconpos="notext" data-iconshadow="false" data-theme="d" class="ui-icon-alt ui-icon-nodisc" id="btn_aumentar_dia" onclick="controller_mostrarSorteos_modificarFecha('mas');"></a></div>
		</fieldset>

	</div>
</div>



<!-- page de Informacion -->
<div data-role="page" id="pageInfo">

	<div data-role="panel" id="defaultpanel" data-position="left" data-display="reveal" data-theme="a">
        <ul data-role="listview" data-theme="a"  data-divider-theme="b" class="nav-search">
            <!-- <li data-icon="delete"><a href="#" data-rel="close">Close menu</a></li> -->
            	<li data-role="list-divider">Menu</li>
            	<li data-icon="home" id="home" ><a href="#page">Sorteos</a></li>
                <li data-icon="custom" id="heart"><a href="cabalas.html">Cabalas</a></li>
                <li data-icon="custom" id="agencia" ><a href="agencias.html" >Agencias Autorizadas</a></li>
                <li data-icon="custom" id="premio"><a href="premios.html">Liquidacion Premios</a></li>
                <li data-icon="alert"><a href="#pageJuego" >Juego Responsable</a></li>
                <li data-icon="info"><a href="#pageInfo" data-rel="close" >Informacion General</a></li>
   		</ul>
	</div><!-- /default panel -->

	<!-- cabecera -->
	<div data-role="header" data-theme="b" >
		<h3>Información</h3>
		<a href="#defaultpanel" data-icon="bars" data-iconpos="notext" data-iconshadow="false" data-theme="d" class="ui-icon-alt ui-icon-nodisc"  data-transition="fade" data-direction="reverse">info</a>
		<a href="#page" data-role="button" data-icon="custom" id="anterior" data-rel="back" data-iconpos="notext" data-iconshadow="false" data-theme="d" class="ui-icon-nodisc" data-transition="fade"></a>
	
	</div>
	<!-- content -->
	<div data-role="content">
		<ul data-role="listview" data-inset="true">
    <li data-role="list-divider">Friday, October 8, 2010 <span class="ui-li-count">2</span></li>
    <li><a href="index.html">
        <h2>Stephen Weber</h2>
        <p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
        <p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
        <p class="ui-li-aside"><strong>6:24</strong>PM</p>
    </a></li>
    <li><a href="index.html">
        <h2>jQuery Team</h2>
        <p><strong>Boston Conference Planning</strong></p>
        <p>In preparation for the upcoming conference in Boston, we need to start gathering a list of sponsors and speakers.</p>
        <p class="ui-li-aside"><strong>9:18</strong>AM</p>
    </a></li>
    <li data-role="list-divider">Thursday, October 7, 2010 <span class="ui-li-count">1</span></li>
    <li><a href="index.html">
        <h2>Avery Walker</h2>
        <p><strong>Re: Dinner Tonight</strong></p>
        <p>Sure, let's plan on meeting at Highland Kitchen at 8:00 tonight. Can't wait! </p>
        <p class="ui-li-aside"><strong>4:48</strong>PM</p>
    </a></li>
</ul>
	</div>
	<!-- footer -->
	<div data-role="footer" data-theme="b" data-position="fixed" >
			<div class="ui-block-a" align="center"> Banco de Accion Social </div>
	</div>
</div>

<!-- page de Juego Responsable -->
<div data-role="page" id="pageJuego">

	<div data-role="panel" id="defaultpanel" data-position="left" data-display="reveal" data-theme="a">
        <ul data-role="listview" data-theme="a"  data-divider-theme="b" class="nav-search">
            <!-- <li data-icon="delete"><a href="#" data-rel="close">Close menu</a></li> -->
            	<li data-role="list-divider">Menu</li>
            	<li data-icon="home" id="home" ><a href="#page">Sorteos</a></li>
                <li data-icon="custom" id="heart"><a href="cabalas.html">Cabalas</a></li>
                <li data-icon="custom" id="agencia" ><a href="agencias.html" >Agencias Autorizadas</a></li>
                <li data-icon="custom" id="premio"><a href="premios.html">Liquidacion Premios</a></li>
                <li data-icon="alert"><a href="#pageJuego"  data-rel="close">Juego Responsable</a></li>
                <li data-icon="info"><a href="#pageInfo" >Informacion General</a></li>
   		</ul>
	</div><!-- /default panel -->

	<!-- cabecera -->
	<div data-role="header" data-theme="b" >
		<h3>JUego Responsable</h3>
		<a href="#defaultpanel" data-icon="bars" data-iconpos="notext" data-iconshadow="false" data-theme="d" class="ui-icon-alt ui-icon-nodisc"  data-transition="fade" data-direction="reverse">info</a>
		<a href="#page" data-role="button" data-icon="custom" id="anterior" data-rel="back" data-iconpos="notext" data-iconshadow="false" data-theme="d" class="ui-icon-nodisc" data-transition="fade"></a>
   	</div>
	<!-- content -->
	<div data-role="content">
	
	</div>
	<!-- footer -->
	<div data-role="footer" data-theme="b" data-position="fixed" >
			<div class="ui-block-a" align="center"> Banco de Accion Social </div>
	</div>
</div>


<script src="js/utils/utils.js"></script>
<script src="js/connection/connection.js"></script>
<script src="js/model/dao/sorteoDAO.js"></script>
<script src="js/controller/paginaCabalasController.js"></script>
<script src="js/model/vo/sorteoVO.js"></script>
<script src="js/controller/paginaController.js"></script>
<script src="js/businesslogic/tombolaService.js"></script>
<script type="text/javascript">
	configurarCalendario();

	var ONLINE = true;
	var URL = 'http://192.168.0.103/appPhoneServer/reply.php';

	var db = window.openDatabase("TombolaBD", "1.0", "TombolaBD", 200000);

	var fechaNavegacion = new Date();
	var fechaHoy = new Date();
	//$('#calendario').text(fechaUtils_format(fecha, '/,dd-mm-yyyy'));

	var arrayDivsTablas = new Array();
	arrayDivsTablas.push($('#tablas_1'));
	arrayDivsTablas.push($('#tablas_2'));
	arrayDivsTablas.push($('#tablas_3'));
	arrayDivsTablas.push($('#tablas_4'));
// ejecutar('drop table sorteos');
	//El localStorage no se deberia limpiar
 	localStorage.clear();
	//connection_cargarBD(controller_mostrarSorteos_modificarFecha.bind(null, fechaNavegacion), connection_createTables);
	ejecutars(createtable_sorteos_sql, controller_mostrarSorteos_modificarFecha.bind(null, fechaNavegacion), connection_error);
	//connection_createTables();

	/*db.transaction(function(tx) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS sorteos (id_sorteo INTEGER PRIMARY KEY AUTOINCREMENT, nombre TEXT, num INTEGER, fecha TEXT, lugar TEXT, numeros TEXT)',
          [], function(tx, result){
            controller_mostrarSorteos_modificarFecha(fechaNavegacion);
          }, function(tx, error){
            alert(error.message);
          });
    });*/

//controller_mostrarSorteos_modificarFecha(fecha);
	//getDataHTML();
	
	//cargarSuenios();

	function configurarCalendario(){
		jQuery.extend(jQuery.mobile.datebox.prototype.options.lang, {
    'es': {
        setDateButtonLabel: "OK",
        setTimeButtonLabel: "Fecha",
        setDurationButtonLabel: "Set Duration",
        calTodayButtonLabel: "Jump to Today",
        titleDateDialogLabel: "Fecha",
        titleTimeDialogLabel: "Set Time",
        daysOfWeek: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
        daysOfWeekShort: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
        monthsOfYear: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
        monthsOfYearShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        durationLabel: ['Days', 'Hours', 'Minutes', 'Seconds'],
        durationDays: ['Day', 'Days'],
        tooltip: "Open Date Picker",
        nextMonth: "Next Month",
        prevMonth: "Previous Month",
        timeFormat: 12,
        headerFormat: '',//%A, %B %-d, %Y
        dateFieldOrder: ['d', 'm', 'y'],
        timeFieldOrder: ['h', 'i', 'a'],
        slideFieldOrder: ['y', 'm', 'd'],
        dateFormat: '%d/%m/%Y',
        useArabicIndic: false,
        isRTL: false,
        calStartDay: 0,
        clearButton: 'clear',
        durationOrder: ['d', 'h', 'i', 's'],
        meridiem: ['AM', 'PM'],
        timeOutput: '%k:%M', // 12hr: '%l:%M %p', 24hr: '%k:%M',
        durationFormat: '%Dd %DA, %Dl:%DM:%DS',
        calDateListLabel: 'Other Dates',
        beforeToday: 'true',
        afterToday: 'true'
    }
	});
	jQuery.extend(jQuery.mobile.datebox.prototype.options, {
    	useLang: 'es'
	});



/*$('#ctrlgrp').live('dateboxcreate', function() {
  $('#ctrlgrp').datebox({'maxDays': getmax()});
  $('#ctrlgrp').datebox({'minDays': getmin()});
});*/
//console.log(getdays());
	$('#calendario').on('vclick', function() {

  		$('#ctrlgrp').datebox('open');
		//$('#ctrlgrp').datebox({'maxDays': 2});
		//$('#ctrlgrp').datebox('applyMinMax');
		//console.log(getdays());
		//$('#ctrlgrp').datebox('refresh');
  		//$('#ctrlgrp').datebox({'maxDays': getdays()});
  		//$('#ctrlgrp').datebox({'minDays': getdays()});
	});


	

	$('#ctrlgrp').bind('change', function(e,p) {
  		//alert($(this).val());
  		controller_mostrarSorteos_modificarFecha(fechaUtils_getDate($(this).val()+' 00:00:00.000'));
	});
}

function getdays() { 
  var rightnow = new Date()
    today = new Date(rightnow.getFullYear(), rightnow.getMonth(), rightnow.getDate(), 0,0,0,0)
    maxdate = new Date(2014, 1, 15, 0,0,0,0)
    console.log(maxdate);

  daysuntil = ( maxdate - today ) / ( 1000 * 60 * 60 * 24 )

  return parseInt(daysuntil,10)
}

/*	function getmin() { 
  var rightnow = new Date();


  return parseInt(rightnow.getDate()-10);
}
function getdays() { 
  var rightnow = new Date()
    today = new Date(rightnow.getFullYear(), rightnow.getMonth(), rightnow.getDate(), 0,0,0,0)
    maxdate = new Date(2014, 5, 30, 0,0,0,0)

  daysuntil = ( maxdate - today ) / ( 1000 * 60 * 60 * 24 )

  return parseInt(daysuntil,10)
}
function getmax(){

  return new Date();	
}*/
</script>
</body>
</html>